/** The MIT License (MIT)
Copyright (c) 2021 Fa-b*/
var c=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],cC=function(t,i){var h=document.createElement("canvas"),s=window.devicePixelRatio||1,a=t.getBoundingClientRect();h.width=a.width,h.width*=s,h.height=a.height,h.height*=s;let e=h.getContext("2d");return h.style.position="absolute",h.style.width=h.width/s+"px",h.style.height=h.height/s+"px",h.style.zI=i,e.scale(s,s),t.appendChild(h),{ctx:e,width:a.width,height:a.height}},dBG={offset:{x:0,y:0},color:"#FFFFFF",alpha:1},dG={ticks:{x:0,y:5},offset:{x:0,y:0},type:"linear",color:"#D3D3D3",lineWidth:1,alpha:1},dXA={ticks:0,tickSize:10,tickOffset:0,offset:{x:0,y:0},type:"linear",position:"top",color:"#000000",lineWidth:1,alpha:1},dYA={ticks:5,tickSize:10,tickOffset:0,offset:{x:0,y:0},type:"linear",position:"left",color:"#000000",lineWidth:1,alpha:1},dGp={offset:{x:0,y:0},color:c,lineWidth:1,alpha:.5};function LightPlot(t,i){this.a,this.oO,this.gp=[],this.a=document.getElementById(t),this.oO=i,this.setBackground(),this.updateAll()}LightPlot.prototype.setBackground=function(t){this.bg||(this.bg=cC(this.a,1)),this.bg={...this.bg,...dBG,...this.oO.background,...t},this.updateBackground()},LightPlot.prototype.setGrid=function(t){this.gd||(this.gd=cC(this.a,2)),this.gd={...this.gd,...dG,...this.oO.grid,...t},this.updateGrid()},LightPlot.prototype.setXAxis=function(t=null,i){this.xa||(this.xa=cC(this.a,4)),t&&(this.xa.d={from:t[0],to:t[1]}),this.xa={...this.xa,...dYA,...this.oO.xaxis,...i},this.updateXAxis()},LightPlot.prototype.setYAxis=function(t=null,i){this.ya||(this.ya=cC(this.a,4)),t&&(this.ya.d={from:t[0],to:t[1]}),this.ya={...this.ya,...dYA,...this.oO.yaxis,...i},this.updateYAxis()},LightPlot.prototype.addGraph=function(t,i){this.gp.push(cC(this.a,3));let h=this.gp.length-1;return"function"==typeof t&&(this.gp[h].function=t),"object"==typeof t&&void 0===object&&(object=t),this.gp[h]={...this.gp[h],...dGp,...i},this.updateGraph(h),h},LightPlot.prototype.updateAll=function(){this.updateBackground(),this.updateGrid(),this.updateXAxis(),this.updateYAxis();for(let t=0;t<this.gp.length;t++)this.updateGraph(t)},LightPlot.prototype.updateBackground=function(){this.bg.ctx.clearRect(this.bg.offset.x,this.bg.offset.y,this.bg.width,this.bg.height),this.bg.ctx.globalAlpha=this.bg.alpha,this.bg.ctx.fillStyle=this.bg.color,this.bg.ctx.fillRect(this.bg.offset.x,this.bg.offset.y,this.bg.width,this.bg.height)},LightPlot.prototype.updateGrid=function(){if(this.gd&&"linear"==this.gd.type){if(this.gd.ticks.x)var t=this.gd.width/(this.gd.ticks.x+1);if(this.gd.ticks.y)var i=this.gd.height/(this.gd.ticks.y+1);this.gd.ctx.clearRect(this.gd.offset.x,this.gd.offset.y,this.gd.width,this.gd.height),this.gd.ctx.globalAlpha=this.gd.alpha,this.gd.ctx.strokeStyle=this.gd.color,this.gd.ctx.strokeWidth=this.gd.lineWidth;let h=this.gd.ctx.strokeWidth%2==1?.5:0;if(this.gd.ctx.beginPath(),t)for(let i=1;i<=this.gd.ticks.x;++i)this.gd.ctx.moveTo(i*t+h,this.gd.offset.y),this.gd.ctx.lineTo(i*t+h,this.gd.height);if(i)for(let t=1;t<=this.gd.ticks.y;++t)this.gd.ctx.moveTo(this.gd.offset.x,t*i-h),this.gd.ctx.lineTo(this.gd.width,t*i-h);this.gd.ctx.stroke()}},LightPlot.prototype.updateXAxis=function(){if(this.xa){this.xa.d.from,this.xa.width,this.xa.d.to,this.xa.d.from;this.xa.ctx.clearRect(this.xa.offset.x,this.xa.offset.y,this.xa.width,this.xa.height),this.xa.ctx.globalAlpha=this.xa.alpha,this.xa.ctx.strokeStyle=this.xa.color,this.xa.ctx.strokeWidth=this.xa.lineWidth;let a=this.gd.ctx.strokeWidth%2==1?.5:0;this.xa.ctx.beginPath();var t=this.xa.height-this.xa.offset.y-a;if("top"===this.xa.position&&(t=this.xa.offset.y+a),this.xa.ctx.moveTo(this.xa.offset.x,t),this.xa.ctx.lineTo(this.xa.width,t),"linear"==this.xa.type){var i=t+this.xa.tickSize/2-this.xa.tickOffset,h=t-this.xa.tickSize/2-this.xa.tickOffset;if(this.xa.ticks)var s=this.xa.width/(this.xa.ticks+1);if(s)for(let t=1;t<=this.xa.ticks;++t)this.xa.ctx.moveTo(t*s+a,i),this.xa.ctx.lineTo(t*s+a,h)}this.xa.ctx.stroke()}},LightPlot.prototype.updateYAxis=function(){if(this.ya){this.ya.d.from,this.ya.height,this.ya.d.to,this.ya.d.from;this.ya.ctx.clearRect(this.ya.offset.x,this.ya.offset.y,this.ya.width,this.ya.height),this.ya.ctx.globalAlpha=this.ya.alpha,this.ya.ctx.strokeStyle=this.ya.color,this.ya.ctx.strokeWidth=this.ya.lineWidth;let a=this.gd.ctx.strokeWidth%2==1?.5:0;this.ya.ctx.beginPath();var t=this.ya.offset.x+a;if("right"===this.ya.position&&(t=this.ya.width-this.ya.offset.x-a),this.ya.ctx.moveTo(t,this.ya.height-this.ya.offset.y),this.ya.ctx.lineTo(t,0),"linear"==this.ya.type){var i=t+this.ya.tickSize/2+this.ya.tickOffset,h=t-this.ya.tickSize/2+this.ya.tickOffset;if(this.ya.ticks)var s=this.ya.height/(this.ya.ticks+1);if(s)for(let t=1;t<=this.ya.ticks;++t)this.ya.ctx.moveTo(i,t*s-a),this.ya.ctx.lineTo(h,t*s-a)}this.ya.ctx.stroke()}},LightPlot.prototype.updateGraph=function(t){let i=this.gp[t];i.ctx.clearRect(i.offset.x,i.offset.y,i.width,i.height),i.ctx.globalAlpha=i.alpha,i.ctx.fillStyle=Array.isArray(i.color)?c[t]:i.color;for(var h=null,s=null,a=0;a<=i.width;a++){var e=a*((this.xa.d.to-this.xa.d.from)/i.width)+this.xa.d.from;if(!(e<this.xa.d.from||e>this.xa.d.to)){var o=null==h?i.function(e):h,d=i.function(e+(this.xa.d.to-this.xa.d.from)/i.width),f=null==s?(o-this.ya.d.from)*i.height/(this.ya.d.to-this.ya.d.from):s,l=(d-this.ya.d.from)*i.height/(this.ya.d.to-this.ya.d.from),x=Math.max(f,l),g=Math.abs(f-l)+1;i.ctx.fillRect(a,i.height-x,1,g),h=d,s=l}}};